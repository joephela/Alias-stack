@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  body {
    @apply text-sm leading-relaxed antialiased;
    @apply bg-gray-100 text-gray-900;
  }

  @media (prefers-color-scheme: dark) {
    body {
      @apply bg-[#1e1e1e] text-[#f0f0f0];
    }
  }
}

@layer components {
  /* ── Layout ── */
  .screen {
    @apply flex flex-col h-screen overflow-hidden;
  }

  .topbar {
    @apply flex items-center justify-between px-5 py-3
           bg-white border-b border-gray-200 shadow-sm shrink-0
           app-region-drag;
  }

  @media (prefers-color-scheme: dark) {
    .topbar {
      @apply bg-[#2a2a2a] border-[#3a3a3a];
    }
  }

  .topbar button,
  .topbar-right,
  .topbar-left {
    @apply app-region-no-drag;
  }

  .topbar-left  { @apply flex items-center gap-3; }
  .topbar-right { @apply flex items-center gap-[10px]; }

  .app-title { @apply text-base font-semibold; }

  .shell-file-badge {
    @apply font-mono text-[11px] px-2 py-0.5
           bg-gray-100 border border-gray-200 rounded-full
           text-gray-500 cursor-default select-none;
  }

  @media (prefers-color-scheme: dark) {
    .shell-file-badge {
      @apply bg-[#1e1e1e] border-[#3a3a3a];
    }
  }

  .content      { @apply flex-1 overflow-y-auto p-5; }
  .content-form { @apply max-w-[520px] mx-auto pt-6; }

  /* ── Buttons ── */
  .btn {
    @apply inline-flex items-center gap-1.5 px-4 py-[7px]
           rounded border border-transparent
           text-[13px] font-medium cursor-pointer
           transition-opacity duration-150 whitespace-nowrap;
  }

  .btn:hover    { opacity: 0.85; }
  .btn:disabled { @apply opacity-50 cursor-not-allowed; }

  .btn-primary   { @apply bg-blue-600 text-white border-blue-600; }

  .btn-secondary {
    @apply bg-white text-gray-800 border-gray-200;
  }

  @media (prefers-color-scheme: dark) {
    .btn-secondary {
      @apply bg-[#2a2a2a] text-[#f0f0f0] border-[#3a3a3a];
    }
  }

  .btn-danger { @apply bg-red-600 text-white border-red-600; }

  .btn-icon {
    @apply inline-flex items-center justify-center
           bg-transparent border-none p-[5px_8px]
           rounded cursor-pointer text-sm leading-none
           transition-[opacity,background] duration-100;
    opacity: 0.55;
  }

  .btn-icon:hover { @apply opacity-100 bg-gray-200; }

  @media (prefers-color-scheme: dark) {
    .btn-icon:hover { @apply bg-[#3a3a3a]; }
  }

  .btn-icon-danger:hover { @apply opacity-100 bg-red-50; }

  @media (prefers-color-scheme: dark) {
    .btn-icon-danger:hover { background: rgba(220, 38, 38, 0.15); }
  }

  /* ── Table ── */
  .alias-table {
    @apply w-full border-collapse bg-white rounded overflow-hidden shadow-sm;
  }

  @media (prefers-color-scheme: dark) {
    .alias-table { @apply bg-[#2a2a2a]; }
  }

  .alias-table th {
    @apply text-left px-3.5 py-2.5
           text-[11px] font-semibold uppercase tracking-[0.06em]
           text-gray-500 bg-gray-50
           border-b border-gray-200;
  }

  @media (prefers-color-scheme: dark) {
    .alias-table th {
      @apply bg-[#1e1e1e] border-[#3a3a3a];
    }
  }

  .alias-table td {
    @apply px-3.5 py-[11px] border-b border-gray-200 align-middle;
  }

  @media (prefers-color-scheme: dark) {
    .alias-table td { @apply border-[#3a3a3a]; }
  }

  .alias-table tbody tr:last-child td { @apply border-b-0; }

  .alias-table tbody tr:hover td { @apply bg-gray-50; }

  @media (prefers-color-scheme: dark) {
    .alias-table tbody tr:hover td { @apply bg-[#1e1e1e]; }
  }

  .alias-name        { @apply font-mono font-semibold text-blue-600 text-[13px]; }
  .alias-command     { @apply font-mono text-xs text-gray-800; }
  .alias-description { @apply text-gray-500 text-[13px]; }
  .alias-actions     { @apply w-[90px] whitespace-nowrap text-right; }
  .muted             { @apply text-gray-500; }

  @media (prefers-color-scheme: dark) {
    .alias-name    { @apply text-blue-400; }
    .alias-command { @apply text-[#f0f0f0]; }
  }

  /* ── State Messages ── */
  .state-message,
  .state-empty,
  .state-error {
    @apply text-center py-16 px-5 text-gray-500;
  }

  .state-error p { @apply text-red-600 mb-3.5 font-medium; }
  .state-empty p { @apply mb-[18px] text-[15px]; }
  .state-message { @apply text-[15px]; }

  /* ── Form ── */
  .alias-form   { @apply flex flex-col gap-[22px]; }
  .form-field   { @apply flex flex-col gap-[7px]; }

  .form-field label { @apply text-[13px] font-medium; }

  .form-field input {
    @apply px-3 py-[9px]
           border border-gray-200 rounded
           bg-white text-gray-800 text-sm
           outline-none
           transition-[border-color,box-shadow] duration-150;
  }

  @media (prefers-color-scheme: dark) {
    .form-field input {
      @apply border-[#3a3a3a] bg-[#2a2a2a] text-[#f0f0f0];
    }
  }

  .form-field input:focus {
    @apply border-blue-600;
    box-shadow: 0 0 0 3px rgba(0, 102, 204, 0.12);
  }

  .form-field input:disabled {
    @apply cursor-not-allowed bg-gray-100;
    opacity: 0.55;
  }

  @media (prefers-color-scheme: dark) {
    .form-field input:disabled { @apply bg-[#1e1e1e]; }
  }

  .input-error { @apply border-red-600; }

  .required    { @apply text-red-600 ml-0.5; }
  .optional    { @apply text-gray-500 text-xs font-normal ml-1; }
  .field-error { @apply text-red-600 text-xs; }
  .field-hint  { @apply text-gray-500 text-xs; }

  .form-actions { @apply flex gap-2.5 pt-1; }

  .save-error {
    @apply text-red-600 text-[13px] px-3.5 py-2.5
           border rounded;
    background: rgba(204, 34, 0, 0.08);
    border-color: rgba(204, 34, 0, 0.2);
  }

  /* ── Confirm Dialog ── */
  .dialog-overlay {
    @apply fixed inset-0 bg-black/45
           flex items-center justify-center
           z-[200] animate-fade-in;
  }

  .dialog {
    @apply bg-white rounded p-6 w-[340px]
           animate-slide-up;
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.22);
  }

  @media (prefers-color-scheme: dark) {
    .dialog { @apply bg-[#2a2a2a]; }
  }

  .dialog-message { @apply font-semibold text-[15px] mb-2; }
  .dialog-detail  { @apply text-gray-500 text-[13px] mb-[22px] leading-[1.4]; }
  .dialog-actions { @apply flex gap-2.5 justify-end; }
}
